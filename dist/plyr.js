!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):e.Plyr=t()}(this,function(){"use strict";function e(e){s.storage&&this.config.storage.enabled&&(n.extend(this.storage,e),window.localStorage.setItem(this.config.storage.key,JSON.stringify(this.storage)))}var t={enabled:!0,title:"",debug:!1,autoplay:!1,seekTime:10,volume:1,muted:!1,displayDuration:!0,clickToPlay:!0,hideControls:!0,showPosterOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/2.0.10/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",duration:null,quality:{default:"default",options:["hd2160","hd1440","hd1080","hd720","large","medium","small","tiny","default"]},loop:{active:!1,start:null,end:null},speed:{default:1,options:[.5,.75,1,1.25,1.5,1.75,2]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:window.navigator.language.split("-")[0]},fullscreen:{enabled:!0,fallback:!0},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed","loop"],i18n:{restart:"Restart",rewind:"Rewind {seektime} secs",play:"Play",pause:"Pause",forward:"Forward {seektime} secs",seek:"Seek",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",toggleMute:"Toggle Mute",toggleCaptions:"Toggle Captions",toggleFullscreen:"Toggle Fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",speed:"Speed",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",none:"None",disabled:"Disabled"},urls:{vimeo:{api:"https://player.vimeo.com/api/player.js"},youtube:{api:"https://www.youtube.com/iframe_api"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,forward:null,mute:null,volume:null,captions:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","captionchange","controlshidden","controlsshown","ready","statechange","qualitychange","qualityrequested"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',forward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress--buffer",played:".plyr__progress--played",loop:".plyr__progress--loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",menu:{quality:".js-plyr__menu__list--quality"}},classNames:{video:"plyr__video-wrapper",embed:"plyr__video-embed",control:"plyr__control",type:"plyr--{0}",stopped:"plyr--stopped",playing:"plyr--playing",muted:"plyr--muted",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",menu:{value:"plyr__menu__value",badge:"plyr__badge"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"tab-focus"}},i={embed:["youtube","vimeo"],html5:["video","audio"]},n={is:{object:function(e){return this.getConstructor(e)===Object},number:function(e){return this.getConstructor(e)===Number&&!Number.isNaN(e)},string:function(e){return this.getConstructor(e)===String},boolean:function(e){return this.getConstructor(e)===Boolean},function:function(e){return this.getConstructor(e)===Function},array:function(e){return!this.undefined(e)&&Array.isArray(e)},nodeList:function(e){return!this.undefined(e)&&e instanceof NodeList},htmlElement:function(e){return!this.undefined(e)&&e instanceof HTMLElement},event:function(e){return!this.undefined(e)&&e instanceof Event},cue:function(e){return this.instanceOf(e,window.TextTrackCue)||this.instanceOf(e,window.VTTCue)},track:function(e){return!this.undefined(e)&&(this.instanceOf(e,window.TextTrack)||"string"==typeof e.kind)},undefined:function(e){return null!==e&&void 0===e},empty:function(e){return null===e||void 0===e||(this.string(e)||this.array(e)||this.nodeList(e))&&0===e.length||this.object(e)&&0===Object.keys(e).length},getConstructor:function(e){return null===e||void 0===e?null:e.constructor},instanceOf:function(e,t){return Boolean(e&&t&&e instanceof t)}},getBrowser:function(){return{isIE:!!document.documentMode,isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)}},loadScript:function(e){if(!document.querySelectorAll('script[src="'+e+'"]').length){var t=document.createElement("script");t.src=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}},generateId:function(e){return e+"-"+Math.floor(1e4*Math.random())},inFrame:function(){try{return window.self!==window.top}catch(e){return!0}},wrap:function(e,t){var i=e.length?e:[e];Array.from(i).reverse().forEach(function(e,i){var n=i>0?t.cloneNode(!0):t,s=e.parentNode,a=e.nextSibling;n.appendChild(e),a?s.insertBefore(n,a):s.appendChild(n)})},removeElement:function(e){return n.is.htmlElement(e)&&n.is.htmlElement(e.parentNode)?(e.parentNode.removeChild(e),e):null},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},createElement:function(e,t,i){var s=document.createElement(e);return n.is.object(t)&&n.setAttributes(s,t),n.is.string(i)&&(s.textContent=i),s},insertElement:function(e,t,i,s){t.appendChild(n.createElement(e,i,s))},emptyElement:function(e){for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1},setAttributes:function(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})},getAttributesFromSelector:function(e,t){if(!n.is.string(e)||n.is.empty(e))return{};var i={},s=t;return e.split(",").forEach(function(e){var t=e.trim(),a=t.replace(".",""),l=t.replace(/[[\]]/g,"").split("="),o=l[0],r=l.length>1?l[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":n.is.object(s)&&n.is.string(s.class)&&(s.class+=" "+a),i.class=a;break;case"#":i.id=t.replace("#","");break;case"[":i[o]=r}}),i},toggleClass:function(e,t,i){if(n.is.htmlElement(e)){var s=e.classList.contains(t);return e.classList[i?"add":"remove"](t),i&&!s||!i&&s}return null},hasClass:function(e,t){return n.is.htmlElement(e)&&e.classList.contains(t)},matches:function(e,t){var i={Element:Element},n=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)};return n.call(e,t)},getElements:function(e){return this.elements.container.querySelectorAll(e)},getElement:function(e){return this.elements.container.querySelector(e)},findElements:function(){try{return this.elements.controls=n.getElement.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:n.getElements.call(this,this.config.selectors.buttons.play),pause:n.getElement.call(this,this.config.selectors.buttons.pause),restart:n.getElement.call(this,this.config.selectors.buttons.restart),rewind:n.getElement.call(this,this.config.selectors.buttons.rewind),forward:n.getElement.call(this,this.config.selectors.buttons.forward),mute:n.getElement.call(this,this.config.selectors.buttons.mute),pip:n.getElement.call(this,this.config.selectors.buttons.pip),airplay:n.getElement.call(this,this.config.selectors.buttons.airplay),settings:n.getElement.call(this,this.config.selectors.buttons.settings),captions:n.getElement.call(this,this.config.selectors.buttons.captions),fullscreen:n.getElement.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=n.getElement.call(this,this.config.selectors.progress),this.elements.inputs={seek:n.getElement.call(this,this.config.selectors.inputs.seek),volume:n.getElement.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:n.getElement.call(this,this.config.selectors.display.buffer),duration:n.getElement.call(this,this.config.selectors.display.duration),currentTime:n.getElement.call(this,this.config.selectors.display.currentTime)},n.is.htmlElement(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector("."+this.config.classNames.tooltip)),!0}catch(e){return this.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},getFocusElement:function(){var e=document.activeElement;return e=e&&e!==document.body?document.querySelector(":focus"):null},trapFocus:function(){var e=this,t=n.getElements.call(this,"input:not([disabled]), button:not([disabled])"),i=t[0],s=t[t.length-1];n.on(this.elements.container,"keydown",function(t){9===t.which&&e.fullscreen.active&&(t.target!==s||t.shiftKey?t.target===i&&t.shiftKey&&(t.preventDefault(),s.focus()):(t.preventDefault(),i.focus()))},!1)},proxy:function(e,t,i,s,a,l){n.on(e,t,function(t){i&&i.apply(e,[t]),s.apply(e,[t])},a,l)},toggleListener:function(e,t,i,a,l,o){if(null!==e&&!n.is.undefined(e))if(e instanceof NodeList)Array.from(e).forEach(function(e){e instanceof Node&&n.toggleListener.call(null,e,t,i,a,l,o)});else{var r=t.split(" "),c=!!n.is.boolean(o)&&o;s.passiveListeners&&(c={passive:!n.is.boolean(l)||l,capture:!!n.is.boolean(o)&&o}),r.forEach(function(t){e[a?"addEventListener":"removeEventListener"](t,i,c)})}},on:function(e,t,i,s,a){n.toggleListener(e,t,i,!0,s,a)},off:function(e,t,i,s,a){n.toggleListener(e,t,i,!1,s,a)},dispatchEvent:function(e,t,i,s){if(e&&t){var a=new CustomEvent(t,{bubbles:!!n.is.boolean(i)&&i,detail:Object.assign({},s,{plyr:this instanceof Plyr?this:null})});e.dispatchEvent(a)}},toggleState:function(e,t){if(!e)return null;var i=n.is.boolean(t)?t:!e.getAttribute("aria-pressed");return e.setAttribute("aria-pressed",i),i},getPercentage:function(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)},extend:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=t.length;if(!s)return null;if(1===s)return t[0];var a=Array.prototype.shift.call(t);return n.is.object(a)||(a={}),t.forEach(function(e){n.is.object(e)&&Object.keys(e).forEach(function(t){e[t]&&e[t].constructor&&e[t].constructor===Object?(a[t]=a[t]||{},n.extend(a[t],e[t])):a[t]=e[t]})}),a},parseYouTubeId:function(e){return e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e},parseVimeoId:function(e){if(n.is.number(Number(e)))return e;return e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e},buildUrlParameters:function(e){return n.is.object(e)?Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"):""},stripHTML:function(e){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText},loadSprite:function(e,t){function i(e){this.innerHTML=e,document.body.insertBefore(this,document.body.childNodes[0])}if("string"==typeof e){var n="string"==typeof t;if(!n||!document.querySelectorAll("#"+t).length){var a=document.createElement("div");if(a.setAttribute("hidden",""),n&&a.setAttribute("id",t),s.storage){var l=window.localStorage.getItem("cache-"+t);if(null!==l){var o=JSON.parse(l);i.call(a,o.content)}}var r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.open("GET",e,!0),r.onload=function(){s.storage&&window.localStorage.setItem("cache-"+t,JSON.stringify({content:r.responseText})),i.call(a,r.responseText)},r.send()}}},transitionEnd:function(){var e=document.createElement("span"),t=Object.keys({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"}).find(function(t){return void 0!==e.style[t]});return"string"==typeof t&&t}()},s={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t){var i=!1,a=!1,l=n.getBrowser(),o=l.isIPhone&&t&&s.inline;switch(e){case"video":a=(i=s.video)&&s.rangeInput&&(!l.isIPhone||o);break;case"audio":a=(i=s.audio)&&s.rangeInput;break;case"youtube":i=!0,a=s.rangeInput&&(!l.isIPhone||o);break;case"vimeo":i=!0,a=s.rangeInput&&!l.isIPhone;break;default:a=(i=s.audio&&s.video)&&s.rangeInput}return{api:i,ui:a}},storage:function(){if(!("localStorage"in window))return!1;try{return window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0}catch(e){return!1}}(),pip:!n.getBrowser().isIPhone&&n.is.function(n.createElement("video").webkitSetPresentationMode),airplay:n.is.function(window.WebKitPlaybackTargetAvailabilityEvent),inline:"playsInline"in document.createElement("video"),mime:function(e,t){var i={player:e};try{if(!n.is.function(i.canPlayType))return!1;if("video"===e.type)switch(t){case"video/webm":return i.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,"");case"video/mp4":return i.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,"");case"video/ogg":return i.canPlayType('video/ogg; codecs="theora"').replace(/no/,"");default:return!1}else if("audio"===e.type)switch(t){case"audio/mpeg":return i.canPlayType("audio/mpeg;").replace(/no/,"");case"audio/ogg":return i.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"");case"audio/wav":return i.canPlayType('audio/wav; codecs="1"').replace(/no/,"");default:return!1}}catch(e){return!1}return!1},textTracks:"textTracks"in document.createElement("video"),passiveListeners:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t)}catch(e){}return e}(),rangeInput:function(){var e=document.createElement("input");return e.type="range","range"===e.type}(),touch:"ontouchstart"in document.documentElement,transitions:!1!==n.transitionEnd,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},a={updateRangeFill:function(e){if(this.browser.isWebkit){var t=n.is.event(e)?e.target:e;if(n.is.htmlElement(t)&&"range"===t.getAttribute("type")){n.is.htmlElement(this.elements.styleSheet)||(this.elements.styleSheet=n.createElement("style"),this.elements.container.appendChild(this.elements.styleSheet));var i=this.elements.styleSheet.sheet,s=t.value/t.max*100,a="#"+t.id+"::-webkit-slider-runnable-track",l="{ background-image: linear-gradient(to right, currentColor "+s+"%, transparent "+s+"%) }",o=Array.from(i.rules).findIndex(function(e){return e.selectorText===a});-1!==o&&i.deleteRule(o),i.insertRule([a,l].join(" "))}}},getIconUrl:function(){return{url:this.config.iconUrl,absolute:0===this.config.iconUrl.indexOf("http")||this.browser.isIE}},createIcon:function(e,t){var i=a.getIconUrl.call(this),s=(i.absolute?"":i.url)+"#"+this.config.iconPrefix,l=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributes(l,n.extend(t,{role:"presentation"}));var o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s+"-"+e),l.appendChild(o),l},createLabel:function(e){var t=this.config.i18n[e];switch(e){case"pip":t="PIP";break;case"airplay":t="AirPlay"}return n.createElement("span",{class:this.config.classNames.hidden},t)},createBadge:function(e){var t=n.createElement("span",{class:this.config.classNames.menu.value});return t.appendChild(n.createElement("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var i=n.createElement("button"),s=Object.assign({},t),l=e,o=void 0,r=void 0,c=void 0;switch("type"in s||(s.type="button"),"class"in s?-1===s.class.indexOf(this.config.classNames.control)&&(s.class+=" "+this.config.classNames.control):s.class=this.config.classNames.control,l){case"mute":c="toggleMute",o="volume",r="muted";break;case"captions":c="toggleCaptions",o="captions-off",r="captions-on";break;case"fullscreen":c="toggleFullscreen",o="enter-fullscreen",r="exit-fullscreen";break;case"play-large":s.class="plyr__play-large",l="play",c="play",o="play";break;default:c=l,o=l}return n.extend(s,n.getAttributesFromSelector(this.config.selectors.buttons[l],s)),n.is.string(r)&&i.appendChild(a.createIcon.call(this,r,{class:"icon--"+r})),i.appendChild(a.createIcon.call(this,o)),i.appendChild(a.createLabel.call(this,c)),n.setAttributes(i,s),this.elements.buttons[l]=i,i},createRange:function(e,t){var i=n.createElement("label",{for:t.id,class:this.config.classNames.hidden},this.config.i18n[e]),s=n.createElement("input",n.extend(n.getAttributesFromSelector(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off"},t));return this.elements.inputs[e]=s,{label:i,input:s}},createProgress:function(e,t){var i=n.createElement("progress",n.extend(n.getAttributesFromSelector(this.config.selectors.display[e]),{min:0,max:100,value:0},t));if("volume"!==e){i.appendChild(n.createElement("span",null,"0"));var s="";switch(e){case"played":s=this.config.i18n.played;break;case"buffer":s=this.config.i18n.buffered}i.textContent="% "+s.toLowerCase()}return this.elements.display[e]=i,i},createTime:function(e){var t=n.createElement("span",{class:"plyr__time"});return t.appendChild(n.createElement("span",{class:this.config.classNames.hidden},this.config.i18n[e])),t.appendChild(n.createElement("span",n.getAttributesFromSelector(this.config.selectors.display[e]),"00:00")),this.elements.display[e]=t,t},toggleTab:function(e,t){var i=this.elements.settings.tabs[e],s=this.elements.settings.panes[e];n.is.htmlElement(i)&&(t?i.removeAttribute("hidden"):i.setAttribute("hidden","")),n.is.htmlElement(s)&&(t?s.removeAttribute("hidden"):s.setAttribute("hidden",""))},setQualityMenu:function(e){var t=this,i=this.elements.settings.panes.quality.querySelector("ul");n.is.array(e)?this.options.quality=e.filter(function(e){return t.config.quality.options.includes(e)}):this.options.quality=this.config.quality.options;var s=!n.is.empty(this.options.quality)&&"youtube"===this.type;if(a.toggleTab.call(this,"quality",s),s){n.emptyElement(i);var l=function(e){var i="";switch(e){case"hd2160":i="4K";break;case"hd1440":i="WQHD";break;case"hd1080":case"hd720":i="HD"}return i.length?a.createBadge.call(t,i):null};this.options.quality.forEach(function(e){var s=n.createElement("li"),o=n.createElement("label",{class:t.config.classNames.control}),r=n.createElement("input",n.extend(n.getAttributesFromSelector(t.config.selectors.inputs.quality),{type:"radio",name:"plyr-quality",value:e}));o.appendChild(r),o.appendChild(document.createTextNode(a.getLabel.call(t,"quality",e)));var c=l(e);n.is.htmlElement(c)&&o.appendChild(c),s.appendChild(o),i.appendChild(s)}),a.updateSetting.call(this,"quality",i)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?"Normal":t+"&times;";case"quality":switch(t){case"hd2160":return"2160P";case"hd1440":return"1440P";case"hd1080":return"1080P";case"hd720":return"720P";case"large":return"480P";case"medium":return"360P";case"small":return"240P";case"tiny":return"Tiny";case"default":return"Auto";default:return t}case"captions":return a.getLanguage.call(this);default:return null}},updateSetting:function(e,t){var i=this.elements.settings.panes[e],s=null,l=t;switch(e){case"captions":s=this.captions.language,this.captions.enabled||(s="");break;default:if(s=this[e],n.is.empty(s)&&(s=this.config[e].default),!this.options[e].includes(s))return void this.warn("Unsupported value of '"+s+"' for "+e);if(!this.config[e].options.includes(s))return void this.warn("Disabled value of '"+s+"' for "+e)}n.is.htmlElement(l)||(l=i&&i.querySelector("ul"));var o=l&&l.querySelector('input[value="'+s+'"]');n.is.htmlElement(o)&&(o.checked=!0,this.elements.settings.tabs[e].querySelector("."+this.config.classNames.menu.value).innerHTML=a.getLabel.call(this,e,s))},setLoopMenu:function(){var e=this,t=this.elements.settings.panes.loop.querySelector("ul");this.elements.settings.tabs.loop.removeAttribute("hidden"),this.elements.settings.panes.loop.removeAttribute("hidden");var i=!n.is.empty(this.loop.options);a.toggleTab.call(this,"loop",i),n.emptyElement(t),["start","end","all","reset"].forEach(function(i){var s=n.createElement("li"),l=n.createElement("button",n.extend(n.getAttributesFromSelector(e.config.selectors.buttons.loop),{type:"button",class:e.config.classNames.control,"data-plyr-loop-action":i}),e.config.i18n[i]);if(["start","end"].includes(i)){var o=a.createBadge.call(e,"00:00");l.appendChild(o)}s.appendChild(l),t.appendChild(s)})},getLanguage:function(){return this.supported.ui?!s.textTracks||n.is.empty(this.captions.tracks)?this.config.i18n.none:this.captions.enabled?this.captions.currentTrack.label:this.config.i18n.disabled:null},setCaptionsMenu:function(){var e=this,t=this.elements.settings.panes.captions.querySelector("ul"),i=!n.is.empty(this.captions.tracks);if(a.toggleTab.call(this,"captions",i),n.emptyElement(t),!n.is.empty(this.captions.tracks)){var s=Array.from(this.captions.tracks).map(function(e){return{language:e.language,badge:!0,label:n.is.empty(e.label)?e.language.toUpperCase():e.label}});s.unshift({language:"",label:this.config.i18n.none}),s.forEach(function(i){var s=n.createElement("li"),l=n.createElement("label",{class:e.config.classNames.control}),o=n.createElement("input",n.extend(n.getAttributesFromSelector(e.config.selectors.inputs.language),{type:"radio",name:"plyr-language",value:i.language}));i.language.toLowerCase()===e.captions.language.toLowerCase()&&(o.checked=!0),l.appendChild(o),l.appendChild(document.createTextNode(i.label||i.language)),i.badge&&l.appendChild(a.createBadge.call(e,i.language.toUpperCase())),s.appendChild(l),t.appendChild(s)}),a.updateSetting.call(this,"captions",t)}},setSpeedMenu:function(e){var t=this;n.is.array(e)?this.options.speed=e.filter(function(e){return t.config.speed.options.includes(e)}):this.options.speed=this.config.speed.options;var i=!n.is.empty(this.options.speed);if(a.toggleTab.call(this,"speed",i),i){var s=this.elements.settings.panes.speed.querySelector("ul");this.elements.settings.tabs.speed.removeAttribute("hidden"),this.elements.settings.panes.speed.removeAttribute("hidden"),n.emptyElement(s),this.options.speed.forEach(function(e){var i=n.createElement("li"),l=n.createElement("label",{class:t.config.classNames.control}),o=n.createElement("input",n.extend(n.getAttributesFromSelector(t.config.selectors.inputs.speed),{type:"radio",name:"plyr-speed",value:e}));l.appendChild(o),l.insertAdjacentHTML("beforeend",a.getLabel.call(t,"speed",e)),i.appendChild(l),s.appendChild(i)}),a.updateSetting.call(this,"speed",s)}},toggleMenu:function(e){var t=this.elements.settings.form,i=this.elements.buttons.settings,s=n.is.boolean(e)?e:t&&"true"===t.getAttribute("aria-hidden");if(n.is.event(e)){var a=t&&t.contains(e.target),l=e.target===this.elements.buttons.settings;if(a||!a&&!l&&s)return;l&&e.stopPropagation()}i&&i.setAttribute("aria-expanded",s),t&&(t.setAttribute("aria-hidden",!s),s?t.removeAttribute("tabindex"):t.setAttribute("tabindex",-1))},getTabSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.setAttribute("aria-hidden",!1),Array.from(t.querySelectorAll("input[name]")).forEach(function(e){var t=e.getAttribute("name");e.setAttribute("name",t+"-clone")}),e.parentNode.appendChild(t);var i=t.scrollWidth,s=t.scrollHeight;return n.removeElement(t),{width:i,height:s}},showTab:function(e){var t=this.elements.settings.menu,i=e.target,l="false"===i.getAttribute("aria-expanded"),o=document.getElementById(i.getAttribute("aria-controls"));if(n.is.htmlElement(o)&&"tabpanel"===o.getAttribute("role")){var r=t.querySelector('[role="tabpanel"][aria-hidden="false"]'),c=r.parentNode;if(Array.from(t.querySelectorAll('[aria-controls="'+r.getAttribute("id")+'"]')).forEach(function(e){e.setAttribute("aria-expanded",!1)}),s.transitions&&!s.reducedMotion){c.style.width=r.scrollWidth+"px",c.style.height=r.scrollHeight+"px";var u=a.getTabSize.call(this,o),d=function e(t){t.target===c&&["width","height"].includes(t.propertyName)&&(c.style.width="",c.style.height="",n.off(c,n.transitionEnd,e))};n.on(c,n.transitionEnd,d),c.style.width=u.width+"px",c.style.height=u.height+"px"}r.setAttribute("aria-hidden",!0),r.setAttribute("tabindex",-1),o.setAttribute("aria-hidden",!l),i.setAttribute("aria-expanded",l),o.removeAttribute("tabindex")}},create:function(e){var t=this;if(n.is.empty(this.config.controls))return null;var i=n.createElement("div",n.getAttributesFromSelector(this.config.selectors.controls.wrapper));if(this.config.controls.includes("restart")&&i.appendChild(a.createButton.call(this,"restart")),this.config.controls.includes("rewind")&&i.appendChild(a.createButton.call(this,"rewind")),this.config.controls.includes("play")&&(i.appendChild(a.createButton.call(this,"play")),i.appendChild(a.createButton.call(this,"pause"))),this.config.controls.includes("fast-forward")&&i.appendChild(a.createButton.call(this,"fast-forward")),this.config.controls.includes("progress")){var l=n.createElement("span",n.getAttributesFromSelector(this.config.selectors.progress)),o=a.createRange.call(this,"seek",{id:"plyr-seek-"+e.id});if(l.appendChild(o.label),l.appendChild(o.input),l.appendChild(a.createProgress.call(this,"buffer")),this.config.tooltips.seek){var r=n.createElement("span",{role:"tooltip",class:this.config.classNames.tooltip},"00:00");l.appendChild(r),this.elements.display.seekTooltip=r}this.elements.progress=l,i.appendChild(this.elements.progress)}if(this.config.controls.includes("current-time")&&i.appendChild(a.createTime.call(this,"currentTime")),this.config.controls.includes("duration")&&i.appendChild(a.createTime.call(this,"duration")),this.config.controls.includes("mute")&&i.appendChild(a.createButton.call(this,"mute")),this.config.controls.includes("volume")){var c=n.createElement("span",{class:"plyr__volume"}),u={max:1,step:.05,value:this.config.volume},d=a.createRange.call(this,"volume",n.extend(u,{id:"plyr-volume-"+e.id}));c.appendChild(d.label),c.appendChild(d.input),i.appendChild(c)}if(this.config.controls.includes("captions")&&i.appendChild(a.createButton.call(this,"captions")),this.config.controls.includes("settings")&&!n.is.empty(this.config.settings)){var h=n.createElement("div",{class:"plyr__menu"});h.appendChild(a.createButton.call(this,"settings",{id:"plyr-settings-toggle-"+e.id,"aria-haspopup":!0,"aria-controls":"plyr-settings-"+e.id,"aria-expanded":!1}));var p=n.createElement("form",{class:"plyr__menu__container",id:"plyr-settings-"+e.id,"aria-hidden":!0,"aria-labelled-by":"plyr-settings-toggle-"+e.id,role:"tablist",tabindex:-1}),m=n.createElement("div"),g=n.createElement("div",{id:"plyr-settings-"+e.id+"-home","aria-hidden":!1,"aria-labelled-by":"plyr-settings-toggle-"+e.id,role:"tabpanel"}),f=n.createElement("ul",{role:"tablist"});this.config.settings.forEach(function(i){var s=n.createElement("li",{role:"tab",hidden:""}),a=n.createElement("button",n.extend(n.getAttributesFromSelector(t.config.selectors.buttons.settings),{type:"button",class:t.config.classNames.control+" "+t.config.classNames.control+"--forward",id:"plyr-settings-"+e.id+"-"+i+"-tab","aria-haspopup":!0,"aria-controls":"plyr-settings-"+e.id+"-"+i,"aria-expanded":!1}),t.config.i18n[i]),l=n.createElement("span",{class:t.config.classNames.menu.value});l.innerHTML=e[i],a.appendChild(l),s.appendChild(a),f.appendChild(s),t.elements.settings.tabs[i]=s}),g.appendChild(f),m.appendChild(g),this.config.settings.forEach(function(i){var s=n.createElement("div",{id:"plyr-settings-"+e.id+"-"+i,"aria-hidden":!0,"aria-labelled-by":"plyr-settings-"+e.id+"-"+i+"-tab",role:"tabpanel",tabindex:-1,hidden:""}),a=n.createElement("button",{type:"button",class:t.config.classNames.control+" "+t.config.classNames.control+"--back","aria-haspopup":!0,"aria-controls":"plyr-settings-"+e.id+"-home","aria-expanded":!1},t.config.i18n[i]);s.appendChild(a);var l=n.createElement("ul");s.appendChild(l),m.appendChild(s),t.elements.settings.panes[i]=s}),p.appendChild(m),h.appendChild(p),i.appendChild(h),this.elements.settings.form=p,this.elements.settings.menu=h}return this.config.controls.includes("pip")&&s.pip&&i.appendChild(a.createButton.call(this,"pip")),this.config.controls.includes("airplay")&&s.airplay&&i.appendChild(a.createButton.call(this,"airplay")),this.config.controls.includes("fullscreen")&&i.appendChild(a.createButton.call(this,"fullscreen")),this.config.controls.includes("play-large")&&(this.elements.buttons.playLarge=a.createButton.call(this,"play-large"),this.elements.container.appendChild(this.elements.buttons.playLarge)),this.elements.controls=i,this.config.controls.includes("settings")&&this.config.settings.includes("speed")&&a.setSpeedMenu.call(this),i},inject:function(){var e=this;if(this.config.loadSprite){var t=a.getIconUrl.call(this);t.absolute?(this.log("AJAX loading absolute SVG sprite "+(this.browser.isIE?"(due to IE)":"")),n.loadSprite(t.url,"sprite-plyr")):this.log("Sprite will be used as external resource directly")}this.id=Math.floor(1e4*Math.random());var i=null;i=n.is.string(this.config.controls)?this.config.controls:n.is.function(this.config.controls)?this.config.controls({id:this.id,seektime:this.config.seekTime}):a.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:"-",quality:"-",captions:a.getLanguage.call(this),loop:"None"});var s=void 0;if(n.is.string(this.config.selectors.controls.container)&&(s=document.querySelector(this.config.selectors.controls.container)),n.is.htmlElement(s)||(s=this.elements.container),n.is.htmlElement(i)?s.appendChild(i):s.insertAdjacentHTML("beforeend",i),n.is.htmlElement(this.elements.controls)&&n.findElements.call(this),this.config.tooltips.controls){var l=n.getElements.call(this,[this.config.selectors.controls.wrapper," ",this.config.selectors.labels," .",this.config.classNames.hidden].join(""));Array.from(l).forEach(function(t){n.toggleClass(t,e.config.classNames.hidden,!1),n.toggleClass(t,e.config.classNames.tooltip,!0)})}}},l={setup:function(){var e=this;if(this.supported.ui){if(n.is.empty(this.storage.language)?n.is.empty(this.captions.language)&&(this.captions.language=this.config.captions.language.toLowerCase()):this.captions.language=this.storage.language,n.is.boolean(this.captions.enabled)||(n.is.empty(this.storage.language)?this.captions.enabled=this.config.captions.active:this.captions.enabled=this.storage.captions),!["video","vimeo"].includes(this.type)||"video"===this.type&&!s.textTracks)return this.captions.tracks=null,void(this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&a.setCaptionsMenu.call(this));if(n.is.htmlElement(this.elements.captions)||(this.elements.captions=n.createElement("div",n.getAttributesFromSelector(this.config.selectors.captions)),n.insertAfter(this.elements.captions,this.elements.wrapper)),"video"===this.type&&(this.captions.tracks=this.media.textTracks),n.toggleClass(this.elements.container,this.config.classNames.captions.enabled,!n.is.empty(this.captions.tracks)),!n.is.empty(this.captions.tracks)){l.show.call(this);var t=function(){e.captions.currentTrack=null,Array.from(e.captions.tracks).forEach(function(t){t.language===e.captions.language.toLowerCase()&&(e.captions.currentTrack=t)})};if(t(),!n.is.track(this.captions.currentTrack)){var i=this.config.captions.language;this.captions.language=i,t(),n.is.track(this.captions.currentTrack)||this.toggleCaptions(!1),a.updateSetting.call(this,"captions")}if("video"===this.type){Array.from(this.captions.tracks).forEach(function(t){n.off(t,"cuechange",function(t){return l.setCue.call(e,t)}),t.mode="hidden"});var o=this.captions.currentTrack&&["captions","subtitles"].includes(this.captions.currentTrack.kind);n.is.track(this.captions.currentTrack)&&o&&(n.on(this.captions.currentTrack,"cuechange",function(t){return l.setCue.call(e,t)}),this.captions.currentTrack.activeCues&&this.captions.currentTrack.activeCues.length>0&&a.setCue.call(this,this.captions.currentTrack))}else"vimeo"===this.type&&this.captions.active&&this.embed.enableTextTrack(this.captions.language);this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&a.setCaptionsMenu.call(this)}}},setCue:function(e){var t=(n.is.event(e)?e.target:e).activeCues[0];n.is.cue(t)?l.set.call(this,t.getCueAsHTML()):l.set.call(this),n.dispatchEvent.call(this,this.media,"cuechange")},set:function(e){if(this.supported.ui)if(n.is.htmlElement(this.elements.captions)){var t=n.createElement("span");n.emptyElement(this.elements.captions);var i=n.is.undefined(e)?"":e;n.is.string(i)?t.textContent=i.trim():t.appendChild(i),this.elements.captions.appendChild(t)}else this.warn("No captions element to render to")},show:function(){if(this.elements.buttons.captions){var e=this.storage.captions;n.is.boolean(e)?this.captions.active=e:e=this.captions.active,e&&(n.toggleClass(this.elements.container,this.config.classNames.captions.active,!0),n.toggleState(this.elements.buttons.captions,!0))}}},o=function(){var e=!1;return n.is.function(document.cancelFullScreen)?e="":["webkit","o","moz","ms","khtml"].some(function(t){return n.is.function(document[t+"CancelFullScreen"])?(e=t,!0):!(!n.is.function(document.msExitFullscreen)||!document.msFullscreenEnabled)&&(e="ms",!0)}),e}(),r={prefix:o,enabled:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled,eventType:"ms"===o?"MSFullscreenChange":o+"fullscreenchange",isFullScreen:function(e){if(!r.enabled)return!1;var t=n.is.undefined(e)?document.body:e;switch(o){case"":return document.fullscreenElement===t;case"moz":return document.mozFullScreenElement===t;default:return document[o+"FullscreenElement"]===t}},requestFullScreen:function(e){if(!r.enabled)return!1;var t=n.is.undefined(e)?document.body:e;return o.length?t[o+("ms"===o?"RequestFullscreen":"RequestFullScreen")]():t.requestFullScreen()},cancelFullScreen:function(){return!!r.enabled&&(o.length?document[o+("ms"===o?"ExitFullscreen":"CancelFullScreen")]():document.cancelFullScreen())},element:function(){return r.enabled?o.length?document[o+"FullscreenElement"]:document.fullscreenElement:null},setup:function(){if(this.supported.ui&&"audio"!==this.type&&this.config.fullscreen.enabled){var e=r.enabled;e||this.config.fullscreen.fallback&&!n.inFrame()?(this.log((e?"Native":"Fallback")+" fullscreen enabled"),n.toggleClass(this.elements.container,this.config.classNames.fullscreen.enabled,!0)):this.log("Fullscreen not supported and fallback disabled"),this.elements.buttons&&this.elements.buttons.fullscreen&&n.toggleState(this.elements.buttons.fullscreen,!1),n.trapFocus.call(this)}}},c={setup:function(){var t=null,i={};return s.storage&&this.config.storage.enabled?(window.localStorage.removeItem("plyr-volume"),(t=window.localStorage.getItem(this.config.storage.key))&&(/^\d+(\.\d+)?$/.test(t)?e({volume:parseFloat(t)}):i=JSON.parse(t)),i):i},set:e},u={media:function(){var e=this;if(n.on(this.media,"timeupdate seeking",function(t){return d.timeUpdate.call(e,t)}),n.on(this.media,"durationchange loadedmetadata",function(t){return d.displayDuration.call(e,t)}),n.on(this.media,"ended",function(){"video"===e.type&&e.config.showPosterOnEnd&&(e.restart(),e.media.load())}),n.on(this.media,"progress playing",function(t){return d.updateProgress.call(e,t)}),n.on(this.media,"volumechange",function(t){return d.updateVolume.call(e,t)}),n.on(this.media,"play pause ended",function(t){return d.checkPlaying.call(e,t)}),n.on(this.media,"waiting canplay seeked",function(t){return d.checkLoading.call(e,t)}),this.supported.ui&&this.config.clickToPlay&&"audio"!==this.type){var t=n.getElement.call(this,"."+this.config.classNames.video);if(!t)return;t.style.cursor="pointer",n.on(t,"click",function(){e.config.hideControls&&s.touch&&!e.media.paused||(e.media.paused?e.play():e.media.ended?(e.restart(),e.play()):e.pause())})}this.config.disableContextMenu&&n.on(this.media,"contextmenu",function(e){e.preventDefault()},!1),n.on(this.media,"ratechange",function(){a.updateSetting.call(e,"speed"),c.set.call(e,{speed:e.speed})}),n.on(this.media,"qualitychange",function(){a.updateSetting.call(e,"quality"),c.set.call(e,{quality:e.quality})}),n.on(this.media,"captionchange",function(){c.set.call(e,{language:e.captions.language})}),n.on(this.media,"captionsenabled captionsdisabled",function(){a.updateSetting.call(e,"captions"),c.set.call(e,{captions:e.captions.enabled})}),n.on(this.media,this.config.events.concat(["keyup","keydown"]).join(" "),function(t){n.dispatchEvent.call(e,e.elements.container,t.type,!0)})},controls:function(){function e(e){return e.keyCode?e.keyCode:e.which}function t(t){var i=e(t),s="keydown"===t.type,a=s&&i===l;if(n.is.number(i))if(s){var c=[48,49,50,51,52,53,54,56,57,32,75,38,40,77,39,37,70,67,73,76,79];if([38,40].includes(i)){var u=n.getFocusElement();if(n.is.htmlElement(u)&&"radio"===n.getFocusElement().type)return}switch(c.includes(i)&&(t.preventDefault(),t.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a||function(){this.currentTime=this.duration/10*(i-48)}();break;case 32:case 75:a||o();break;case 38:this.increaseVolume(.1);break;case 40:this.decreaseVolume(.1);break;case 77:a||this.toggleMute();break;case 39:this.forward();break;case 37:this.rewind();break;case 70:this.toggleFullscreen();break;case 67:a||this.toggleCaptions();break;case 73:this.setLoop("start");break;case 76:this.setLoop();break;case 79:this.setLoop("end")}!r.enabled&&this.fullscreen.active&&27===i&&this.toggleFullscreen(),l=i}else l=null}var i=this,s=this.browser.isIE?"change":"input",l=null,o=function(){var e=i.togglePlay(),t=i.elements.buttons[e?"pause":"play"];n.is.htmlElement(t)&&t.focus()};this.config.keyboard.focused&&(this.config.keyboard.global&&n.on(window,"keydown keyup",function(s){var a=e(s),l=n.getFocusElement();![48,49,50,51,52,53,54,56,57,75,77,70,67,73,76,79].includes(a)||n.is.htmlElement(l)&&n.matches(l,i.config.selectors.editable)||t(s)},!1),n.on(this.elements.container,"keydown keyup",t,!1)),n.on(this.elements.container,"focusout",function(e){n.toggleClass(e.target,i.config.classNames.tabFocus,!1)}),n.on(this.elements.container,"keydown",function(e){9===e.keyCode&&window.setTimeout(function(){n.toggleClass(n.getFocusElement(),i.config.classNames.tabFocus,!0)},0)});var c=function(e,t,s){n.is.function(t)&&t.call(i,e),n.is.function(s)&&s.call(i,e)};n.proxy(this.elements.buttons.play,"click",this.config.listeners.play,o),n.proxy(this.elements.buttons.playLarge,"click",this.config.listeners.play,o),n.proxy(this.elements.buttons.pause,"click",this.config.listeners.pause,o),n.proxy(this.elements.buttons.restart,"click",this.config.listeners.restart,function(){i.restart()}),n.proxy(this.elements.buttons.rewind,"click",this.config.listeners.rewind,function(){i.rewind()}),n.proxy(this.elements.buttons.forward,"click",this.config.listeners.forward,function(){i.forward()}),n.proxy(this.elements.buttons.mute,"click",this.config.listeners.mute,function(){i.toggleMute()}),n.proxy(this.elements.buttons.captions,"click",this.config.listeners.captions,function(){i.toggleCaptions()}),n.proxy(this.elements.buttons.fullscreen,"click",this.config.listeners.fullscreen,function(){i.toggleFullscreen()}),n.proxy(this.elements.buttons.pip,"click",this.config.listeners.pip,function(){i.togglePictureInPicture()}),n.proxy(this.elements.buttons.airplay,"click",this.config.listeners.airplay,function(){i.airPlay()}),n.on(this.elements.buttons.settings,"click",function(e){a.toggleMenu.call(i,e)}),n.on(document.documentElement,"click",function(e){a.toggleMenu.call(i,e)}),n.on(this.elements.settings.form,"click",function(e){a.showTab.call(i,e),n.matches(e.target,i.config.selectors.inputs.language)?c.call(i,e,i.config.listeners.language,function(){i.toggleCaptions(!0),i.language=e.target.value.toLowerCase()}):n.matches(e.target,i.config.selectors.inputs.quality)?c.call(i,e,i.config.listeners.quality,function(){i.quality=e.target.value}):n.matches(e.target,i.config.selectors.inputs.speed)?c.call(i,e,i.config.listeners.speed,function(){i.speed=parseFloat(e.target.value)}):n.matches(e.target,i.config.selectors.buttons.loop)&&c.call(i,e,i.config.listeners.loop,function(){i.warn("Set loop")})}),n.proxy(this.elements.inputs.seek,s,this.config.listeners.seek,function(e){i.currentTime=e.target.value/e.target.max*i.duration}),n.proxy(this.elements.inputs.volume,s,this.config.listeners.volume,function(e){i.setVolume(e.target.value)}),this.browser.isWebkit&&n.on(n.getElements.call(this,'input[type="range"]'),"input",function(e){a.updateRangeFill.call(i,e.target)}),n.on(this.elements.progress,"mouseenter mouseleave mousemove",function(e){return d.updateSeekTooltip.call(i,e)}),this.config.hideControls&&(n.on(this.elements.container,"mouseenter mouseleave mousemove touchstart touchend touchcancel touchmove enterfullscreen",function(e){i.toggleControls(e)}),n.on(this.elements.controls,"mouseenter mouseleave",function(e){i.elements.controls.hover="mouseenter"===e.type}),n.on(this.elements.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){i.elements.controls.pressed=["mousedown","touchstart"].includes(e.type)}),n.on(this.elements.controls,"focus blur",function(e){i.toggleControls(e)},!0)),n.proxy(this.elements.inputs.volume,"wheel",this.config.listeners.volume,function(e){var t=e.webkitDirectionInvertedFromDevice,n=0;(e.deltaY<0||e.deltaX>0)&&(t?(i.decreaseVolume(.02),n=-1):(i.increaseVolume(.02),n=1)),(e.deltaY>0||e.deltaX<0)&&(t?(i.increaseVolume(.02),n=1):(i.decreaseVolume(.02),n=-1)),(1===n&&i.media.volume<1||-1===n&&i.media.volume>0)&&e.preventDefault()},!1),r.enabled&&n.on(document,r.eventType,function(e){i.toggleFullscreen(e)})}},d={addStyleHook:function(){n.toggleClass(this.elements.container,this.config.selectors.container.replace(".",""),!0),n.toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(e){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){if(u.media.call(this),!this.supported.ui)return this.warn("Basic support only for "+this.type),n.removeElement.call(this,"controls"),n.removeElement.call(this,"buttons.play"),void d.toggleNativeControls.call(this,!0);n.is.htmlElement(this.elements.controls)||(a.inject.call(this),u.controls.call(this)),n.is.htmlElement(this.elements.controls)&&(d.toggleNativeControls.call(this),r.setup.call(this),l.setup.call(this),this.volume=null,d.updateVolume.call(this),this.speed=null,d.timeUpdate.call(this),d.checkPlaying.call(this),this.ready=!0,n.dispatchEvent.call(this,this.media,"ready"),this.config.autoplay&&this.play())},displayDuration:function(){this.supported.ui&&(!this.elements.display.duration&&this.config.displayDuration&&this.media.paused&&d.updateTimeDisplay.call(this,this.duration,this.elements.display.currentTime),this.elements.display.duration&&d.updateTimeDisplay.call(this,this.duration,this.elements.display.duration),d.updateSeekTooltip.call(this))},setTitle:function(){var e=this.config.i18n.play;if(n.is.string(this.config.title)&&!n.is.empty(this.config.title)&&(e+=", "+this.config.title,this.elements.container.setAttribute("aria-label",this.config.title)),this.supported.ui&&(n.is.htmlElement(this.elements.buttons.play)&&this.elements.buttons.play.setAttribute("aria-label",e),n.is.htmlElement(this.elements.buttons.playLarge)&&this.elements.buttons.playLarge.setAttribute("aria-label",e)),this.isEmbed){var t=n.getElement.call(this,"iframe");if(!n.is.htmlElement(t))return;var i=n.is.empty(this.config.title)?"video":this.config.title;t.setAttribute("title",this.config.i18n.frameTitle.replace("{title}",i))}},checkPlaying:function(){n.toggleClass(this.elements.container,this.config.classNames.playing,!this.media.paused),n.toggleClass(this.elements.container,this.config.classNames.stopped,this.media.paused),this.toggleControls(this.media.paused)},updateVolume:function(){if(this.supported.ui){var e=this.media.muted?0:this.media.volume;this.elements.inputs.volume&&d.setRange.call(this,this.elements.inputs.volume,e)}c.set.call(this,{volume:this.media.volume}),n.toggleClass(this.elements.container,this.config.classNames.muted,this.media.muted),this.supported.ui&&this.elements.buttons.mute&&n.toggleState(this.elements.buttons.mute,this.media.muted)},checkLoading:function(e){var t=this;this.loading="waiting"===e.type,clearTimeout(this.timers.loading),this.timers.loading=setTimeout(function(){n.toggleClass(t.elements.container,t.config.classNames.loading,t.loading),t.toggleControls(t.loading)},this.loading?250:0)},setRange:function(e,t){n.is.htmlElement(e)&&(e.value=t,a.updateRangeFill.call(this,e))},setProgress:function(e,t){var i=n.is.undefined(t)?0:t,s=n.is.undefined(e)?this.elements.display.buffer:e;if(n.is.htmlElement(s)){s.value=i;var a=s.getElementsByTagName("span")[0];n.is.htmlElement(a)&&(a.childNodes[0].nodeValue=i)}},updateProgress:function(e){var t=this;if(this.supported.ui){var i=0;if(e)switch(e.type){case"timeupdate":case"seeking":i=n.getPercentage(this.currentTime,this.duration),"timeupdate"===e.type&&d.setRange.call(this,this.elements.inputs.seek,i);break;case"playing":case"progress":i=function(){var e=t.media.buffered;return e&&e.length?n.getPercentage(e.end(0),t.duration):n.is.number(e)?100*e:0}(),d.setProgress.call(this,this.elements.display.buffer,i)}}},updateTimeDisplay:function(e,t){if(!n.is.htmlElement(t))return null;var i=Number.isNaN(e)?0:e,s=parseInt(i%60,10),a=parseInt(i/60%60,10),l=parseInt(i/60/60%60,10),o=parseInt(this.duration/60/60%60,10)>0;s=("0"+s).slice(-2),a=("0"+a).slice(-2);var r=(o?l+":":"")+a+":"+s;return t.textContent=r,r},timeUpdate:function(e){d.updateTimeDisplay.call(this,this.currentTime,this.elements.display.currentTime),e&&"timeupdate"===e.type&&this.media.seeking||d.updateProgress.call(this,e)},updateSeekTooltip:function(e){if(this.config.tooltips.seek&&n.is.htmlElement(this.elements.inputs.seek)&&n.is.htmlElement(this.elements.display.seekTooltip)&&0!==this.duration){var t=this.elements.inputs.seek.getBoundingClientRect(),i=0,s=this.config.classNames.tooltip+"--visible";if(n.is.event(e))i=100/t.width*(e.pageX-t.left);else{if(!n.hasClass(this.elements.display.seekTooltip,s))return;i=this.elements.display.seekTooltip.style.left.replace("%","")}i<0?i=0:i>100&&(i=100),d.updateTimeDisplay.call(this,this.duration/100*i,this.elements.display.seekTooltip),this.elements.display.seekTooltip.style.left=i+"%",n.is.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&n.toggleClass(this.elements.display.seekTooltip,s,"mouseenter"===e.type)}}},h={setup:function(){var e=this,t=n.parseYouTubeId(this.embedId),i=n.getElements.call(this,'[id^="'+this.type+'-"]');Array.from(i).forEach(n.removeElement),n.toggleClass(this.elements.wrapper,this.config.classNames.embed,!0),this.media.setAttribute("id",n.generateId(this.type)),n.is.object(window.YT)?h.ready.call(this,t):(n.loadScript(this.config.urls.youtube.api),window.onYouTubeReadyCallbacks=window.onYouTubeReadyCallbacks||[],window.onYouTubeReadyCallbacks.push(function(){h.ready.call(e,t)}),window.onYouTubeIframeAPIReady=function(){window.onYouTubeReadyCallbacks.forEach(function(e){e()})})},ready:function(e){var t=this;t.embed=new window.YT.Player(t.media.id,{videoId:e,playerVars:{autoplay:t.config.autoplay?1:0,controls:t.supported.ui?0:1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,disablekb:1,playsinline:1,origin:window&&window.location.hostname,widget_referrer:window&&window.location.href},events:{onError:function(e){n.dispatchEvent.call(t,t.media,"error",!0,{code:e.data,embed:e.target})},onPlaybackQualityChange:function(e){var i=e.target;t.media.quality=i.getPlaybackQuality(),n.dispatchEvent.call(t,t.media,"qualitychange")},onPlaybackRateChange:function(e){var i=e.target;t.media.playbackRate=i.getPlaybackRate(),n.dispatchEvent.call(t,t.media,"ratechange")},onReady:function(e){var i=e.target;t.media.play=function(){i.playVideo(),t.media.paused=!1},t.media.pause=function(){i.pauseVideo(),t.media.paused=!0},t.media.stop=function(){i.stopVideo(),t.media.paused=!0},t.media.duration=i.getDuration(),t.media.paused=!0,t.media.muted=i.isMuted(),t.media.currentTime=0,t.config.controls.includes("settings")&&t.config.settings.includes("speed")&&a.setSpeedMenu.call(t,i.getAvailablePlaybackRates()),t.config.title=i.getVideoData().title,t.supported.ui&&t.media.setAttribute("tabindex",-1),d.build.call(t),n.dispatchEvent.call(t,t.media,"timeupdate"),n.dispatchEvent.call(t,t.media,"durationchange"),window.clearInterval(t.timers.buffering),t.timers.buffering=window.setInterval(function(){t.media.buffered=i.getVideoLoadedFraction(),(null===t.media.lastBuffered||t.media.lastBuffered<t.media.buffered)&&n.dispatchEvent.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,1===t.media.buffered&&(window.clearInterval(t.timers.buffering),n.dispatchEvent.call(t,t.media,"canplaythrough"))},200)},onStateChange:function(e){var i=e.target;switch(window.clearInterval(t.timers.playing),e.data){case 0:if(t.config.loop.active){i.stopVideo(),i.playVideo();break}t.media.paused=!0,n.dispatchEvent.call(t,t.media,"ended");break;case 1:t.media.paused=!1,t.media.seeking&&n.dispatchEvent.call(t,t.media,"seeked"),t.media.seeking=!1,n.dispatchEvent.call(t,t.media,"play"),n.dispatchEvent.call(t,t.media,"playing"),t.timers.playing=window.setInterval(function(){t.media.currentTime=i.getCurrentTime(),n.dispatchEvent.call(t,t.media,"timeupdate")},100),t.media.duration!==i.getDuration()&&(t.media.duration=i.getDuration(),n.dispatchEvent.call(t,t.media,"durationchange")),a.setQualityMenu.call(t,i.getAvailableQualityLevels());break;case 2:t.media.paused=!0,n.dispatchEvent.call(t,t.media,"pause")}n.dispatchEvent.call(t,t.elements.container,"statechange",!1,{code:e.data})}}})}},p={setup:function(){var e=this,t=n.getElements.call(this,'[id^="'+this.type+'-"]');if(Array.from(t).forEach(n.removeElement),n.toggleClass(this.elements.wrapper,this.config.classNames.embed,!0),this.media.setAttribute("id",n.generateId(this.type)),n.is.object(window.Vimeo))p.ready.call(this);else{n.loadScript(this.config.urls.vimeo.api);var i=window.setInterval(function(){n.is.object(window.Vimeo)&&(window.clearInterval(i),p.ready.call(e))},50)}},ready:function(){var e=this,t=this,i={loop:this.config.loop.active,autoplay:this.config.autoplay,byline:!1,portrait:!1,title:!1,transparent:0},s=n.buildUrlParameters(i),a=n.parseVimeoId(this.embedId),o=n.createElement("iframe"),r="https://player.vimeo.com/video/"+a+"?"+s;o.setAttribute("src",r),o.setAttribute("allowfullscreen",""),t.media.appendChild(o),t.embed=new window.Vimeo.Player(o),t.media.play=function(){t.embed.play(),t.media.paused=!1},t.media.pause=function(){t.embed.pause(),t.media.paused=!0},t.media.stop=function(){t.embed.stop(),t.media.paused=!0},t.media.paused=!0,t.media.currentTime=0,d.build.call(t),t.embed.getCurrentTime().then(function(i){t.media.currentTime=i,n.dispatchEvent.call(e,e.media,"timeupdate")}),t.embed.getDuration().then(function(e){t.media.duration=e,n.dispatchEvent.call(t,t.media,"durationchange")}),t.embed.getTextTracks().then(function(e){t.captions.tracks=e,l.setup.call(t)}),t.embed.on("cuechange",function(e){var i=null;e.cues.length&&(i=n.stripHTML(e.cues[0].text)),l.set.call(t,i)}),t.embed.on("loaded",function(){n.is.htmlElement(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)}),t.embed.on("play",function(){t.media.paused=!1,n.dispatchEvent.call(t,t.media,"play"),n.dispatchEvent.call(t,t.media,"playing")}),t.embed.on("pause",function(){t.media.paused=!0,n.dispatchEvent.call(t,t.media,"pause")}),this.embed.on("timeupdate",function(t){e.media.seeking=!1,e.media.currentTime=t.seconds,n.dispatchEvent.call(e,e.media,"timeupdate")}),this.embed.on("progress",function(t){e.media.buffered=t.percent,n.dispatchEvent.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&n.dispatchEvent.call(e,e.media,"canplaythrough")}),this.embed.on("seeked",function(){e.media.seeking=!1,n.dispatchEvent.call(e,e.media,"seeked"),n.dispatchEvent.call(e,e.media,"play")}),this.embed.on("ended",function(){e.media.paused=!0,n.dispatchEvent.call(e,e.media,"ended")})}},m={setup:function(){if(this.media){if(n.toggleClass(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),this.isEmbed&&n.toggleClass(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.supported.ui&&(n.toggleClass(this.elements.container,this.config.classNames.pip.supported,s.pip&&"video"===this.type),n.toggleClass(this.elements.container,this.config.classNames.airplay.supported,s.airplay&&this.isHTML5),n.toggleClass(this.elements.container,this.config.classNames.stopped,this.config.autoplay),n.toggleClass(this.elements.container,this.config.classNames.isIos,this.browser.isIos),n.toggleClass(this.elements.container,this.config.classNames.isTouch,s.touch)),["video","youtube","vimeo"].includes(this.type)&&(this.elements.wrapper=n.createElement("div",{class:this.config.classNames.video}),n.wrap(this.media,this.elements.wrapper)),this.isEmbed)switch(this.type){case"youtube":h.setup.call(this);break;case"vimeo":p.setup.call(this)}d.setTitle.call(this)}else this.warn("No media element found!")},cancelRequests:function(){this.isHTML5&&(Array.from(this.media.querySelectorAll("source")).forEach(n.removeElement),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.log("Cancelled network requests"))}},g={insertElements:function(e,t){var i=this;n.is.string(t)?n.insertElement(e,this.media,{src:t}):n.is.array(t)&&(this.warn(t),t.forEach(function(t){n.insertElement(e,i.media,t)}))},change:function(e){var t=this;n.is.object(e)&&"sources"in e&&e.sources.length?(m.cancelRequests.call(this),this.destroy.call(this,function(){if(n.removeElement(t.media),t.media=null,n.is.htmlElement(t.elements.container)&&t.elements.container.removeAttribute("class"),"type"in e&&(t.type=e.type,"video"===t.type)){var a=e.sources[0];"type"in a&&i.embed.includes(a.type)&&(t.type=a.type)}switch(t.supported=s.check(t.type,t.config.inline),t.type){case"video":t.media=n.createElement("video");break;case"audio":t.media=n.createElement("audio");break;case"youtube":case"vimeo":t.media=n.createElement("div"),t.embedId=e.sources[0].src}t.elements.container.appendChild(t.media),n.is.boolean(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),"poster"in e&&t.media.setAttribute("poster",e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.inline&&t.media.setAttribute("playsinline","")),n.toggleClass(t.elements.container,t.config.classNames.captions.active,t.supported.ui&&t.captions.enabled),d.addStyleHook.call(t),t.isHTML5&&g.insertElements.call(t,"source",e.sources),t.config.title=e.title,m.setup.call(t),t.isHTML5&&("tracks"in e&&g.insertElements.call(t,"track",e.tracks),t.media.load()),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&d.build.call(t)},!0)):this.warn("Invalid source format")}},f=(function(){function e(e){this.value=e}function t(t){function i(s,a){try{var l=t[s](a),o=l.value;o instanceof e?Promise.resolve(o.value).then(function(e){i("next",e)},function(e){i("throw",e)}):n(l.done?"return":"normal",l.value)}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":s.resolve({value:t,done:!0});break;case"throw":s.reject(t);break;default:s.resolve({value:t,done:!1})}(s=s.next)?i(s.key,s.arg):a=null}var s,a;this._invoke=function(e,t){return new Promise(function(n,l){var o={key:e,arg:t,resolve:n,reject:l,next:null};a?a=a.next=o:(s=a=o,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),y=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),b={x:0,y:0};return function(){function e(i,a){var l=this;if(f(this,e),this.timers={},this.ready=!1,this.media=i,n.is.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||n.is.nodeList(this.media)||n.is.array(this.media))&&(this.media=this.media[0]),this.config=n.extend({},t,a,function(){try{return JSON.parse(l.media.getAttribute("data-plyr"))}catch(e){return null}}()),this.elements={container:null,buttons:{},display:{},progress:{},inputs:{},settings:{menu:null,panes:{},tabs:{}},captions:null},this.captions={enabled:null,tracks:null,currentTrack:null},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.log=function(){},this.warn=function(){},this.error=function(){},this.config.debug&&"console"in window&&(this.log=console.log,this.warn=console.warn,this.error=console.error,this.log("Debugging enabled")),this.log("Config",this.config),this.log("Support",s),null!==this.media&&!n.is.undefined(this.media)&&n.is.htmlElement(this.media))if(this.media.plyr)this.warn("Target already setup");else if(this.config.enabled)if(s.check().api){this.elements.original=this.media.cloneNode(!0);var o=this.media.tagName.toLowerCase();switch(o){case"div":if(this.type=this.media.getAttribute("data-type"),this.embedId=this.media.getAttribute("data-video-id"),n.is.empty(this.type))return void this.error("Setup failed: embed type missing");if(n.is.empty(this.embedId))return void this.error("Setup failed: video id missing");this.media.removeAttribute("data-type"),this.media.removeAttribute("data-video-id");break;case"video":case"audio":this.type=o,null!==this.media.getAttribute("crossorigin")&&(this.config.crossorigin=!0),null!==this.media.getAttribute("autoplay")&&(this.config.autoplay=!0),null!==this.media.getAttribute("playsinline")&&(this.config.inline=!0),null!==this.media.getAttribute("muted")&&(this.config.muted=!0),null!==this.media.getAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.error("Setup failed: unsupported type")}this.browser=n.getBrowser(),this.storage=c.setup.call(this),this.supported=s.check(this.type,this.config.inline),this.supported.api?(this.media.plyr=this,this.elements.container=n.createElement("div"),n.wrap(this.media,this.elements.container),d.addStyleHook.call(this),m.setup.call(this),this.config.debug&&n.on(this.elements.container,this.config.events.join(" "),function(e){l.log("event: "+e.type)}),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&d.build.call(this)):this.error("Setup failed: no support")}else this.error("Setup failed: no support");else this.error("Setup failed: disabled by config");else this.error("Setup failed: no suitable element passed")}return y(e,[{key:"play",value:function(){return"play"in this.media&&this.media.play(),this}},{key:"pause",value:function(){return"pause"in this.media&&this.media.pause(),this}},{key:"togglePlay",value:function(e){return!n.is.boolean(e)&&this.media.paused||e?this.play():this.pause()}},{key:"stop",value:function(){return this.restart().pause()}},{key:"restart",value:function(){return this.currentTime=0,this}},{key:"rewind",value:function(e){return this.currentTime=Math.min(this.currentTime-(n.is.number(e)?e:this.config.seekTime),0),this}},{key:"forward",value:function(e){return this.currentTime=Math.max(this.currentTime+(n.is.number(e)?e:this.config.seekTime),this.duration),this}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.media.volume;return this.setVolume(t+n.is.number(e)?e:1)}},{key:"decreaseVolume",value:function(e){var t=this.media.muted?0:this.media.volume;return this.setVolume(t-n.is.number(e)?e:1)}},{key:"toggleMute",value:function(e){var t=n.is.boolean(e)?e:!this.media.muted;if(n.toggleState(this.elements.buttons.mute,t),this.media.muted=t,this.media.muted||0!==this.media.volume||this.setVolume(this.config.volume),this.isEmbed){switch(this.type){case"youtube":this.embed[this.media.muted?"mute":"unMute"]();break;case"vimeo":this.embed.setVolume(this.media.muted?0:this.config.volume)}n.dispatchEvent.call(this,this.media,"volumechange")}return this}},{key:"loop",value:function(e){switch(["start","end","all","none","toggle"].includes(e)?e:"toggle"){case"start":this.config.loop.end&&this.config.loop.end<=this.currentTime&&(this.config.loop.end=null),this.config.loop.start=this.currentTime;break;case"end":if(this.config.loop.start>=this.currentTime)return this;this.config.loop.end=this.currentTime;break;case"all":this.config.loop.start=0,this.config.loop.end=this.duration-2,this.config.loop.indicator.start=0,this.config.loop.indicator.end=100;break;case"toggle":this.config.loop.active?(this.config.loop.start=0,this.config.loop.end=null):(this.config.loop.start=0,this.config.loop.end=this.duration-2);break;default:this.config.loop.start=0,this.config.loop.end=null}return this}},{key:"toggleCaptions",value:function(e){if(!this.supported.ui||!this.elements.buttons.captions)return this;var t=n.is.boolean(e)?e:-1===this.elements.container.className.indexOf(this.config.classNames.captions.active);return this.captions.enabled===t?this:(this.captions.enabled=t,n.toggleState(this.elements.buttons.captions,this.captions.enabled),n.toggleClass(this.elements.container,this.config.classNames.captions.active,this.captions.enabled),n.dispatchEvent.call(this,this.media,this.captions.enabled?"captionsenabled":"captionsdisabled"),this)}},{key:"toggleFullscreen",value:function(e){if(r.enabled){if(!n.is.event(e)||e.type!==r.eventType)return this.fullscreen.active?r.cancelFullScreen():r.requestFullScreen(this.elements.container),this.fullscreen.active=r.isFullScreen(this.elements.container),this;this.fullscreen.active=r.isFullScreen(this.elements.container)}else this.fullscreen.active=!this.fullscreen.active,n.toggleClass(this.elements.container,this.config.classNames.fullscreen.fallback,this.fullscreen.active),this.fullscreen.active?b={x:window.pageXOffset||0,y:window.pageYOffset||0}:window.scrollTo(b.x,b.y),document.body.style.overflow=this.fullscreen.active?"hidden":"";return this.elements.buttons&&this.elements.buttons.fullscreen&&n.toggleState(this.elements.buttons.fullscreen,this.fullscreen.active),n.dispatchEvent.call(this,this.media,this.fullscreen.active?"enterfullscreen":"exitfullscreen"),this}},{key:"togglePictureInPicture",value:function(e){var t=this,i={pip:"picture-in-picture",inline:"inline"};if(!s.pip)return t;var a=n.is.boolean(e)?e:this.media.webkitPresentationMode===i.inline;return this.media.webkitSetPresentationMode(a?i.pip:i.inline),this}},{key:"airPlay",value:function(){return s.airplay?(this.media.webkitShowPlaybackTargetPicker(),this):this}},{key:"toggleControls",value:function(e){var t=this,i=this;if(!n.is.htmlElement(this.elements.controls))return i;if(!this.supported.ui||!this.config.hideControls||"audio"===this.type)return i;var l=0,o=e,r=!1,c=n.hasClass(this.elements.container,this.config.classNames.loading);if(n.is.boolean(e)||(n.is.event(e)?(r="enterfullscreen"===e.type,o=["mousemove","touchstart","mouseenter","focus"].includes(e.type),["mousemove","touchmove"].includes(e.type)&&(l=2e3),"focus"===e.type&&(l=3e3)):o=n.hasClass(this.elements.container,this.config.classNames.hideControls)),window.clearTimeout(this.timers.hover),o||this.media.paused||c){if(n.toggleClass(this.elements.container,this.config.classNames.hideControls,!1)&&n.dispatchEvent.call(this,this.media,"controlsshown"),this.media.paused||c)return i;s.touch&&(l=3e3)}return o&&this.media.paused||(this.timers.hover=window.setTimeout(function(){(!t.elements.controls.pressed&&!t.elements.controls.hover||r)&&n.toggleClass(t.elements.container,t.config.classNames.hideControls,!0)&&(n.dispatchEvent.call(t,t.media,"controlshidden"),t.config.controls.includes("settings")&&!n.is.empty(t.config.settings)&&a.toggleMenu.call(t,!1))},l)),this}},{key:"on",value:function(e,t){return n.on(this.elements.container,e,t),this}},{key:"off",value:function(e,t){return n.off(this.elements.container,e,t),this}},{key:"supports",value:function(e){return s.mime(this,e)}},{key:"destroy",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=function(){if(document.body.style.overflow="",t.embed=null,i)n.removeElement(t.elements.captions),n.removeElement(t.elements.controls),n.removeElement(t.elements.wrapper),t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null,n.is.function(e)&&e();else{var s=t.elements.container.parentNode;n.is.htmlElement(s)&&s.replaceChild(t.elements.original,t.elements.container),n.dispatchEvent.call(t,t.elements.original,"destroyed",!0),n.is.function(e)&&e.call(t.elements.original),t.elements=null}};switch(this.type){case"youtube":window.clearInterval(this.timers.buffering),window.clearInterval(this.timers.playing),this.embed.destroy(),s();break;case"vimeo":this.embed.unload().then(s),window.setTimeout(s,200);break;case"video":case"audio":d.toggleNativeControls.call(this,!0),s()}}},{key:"isHTML5",get:function(){return i.html5.includes(this.type)}},{key:"isEmbed",get:function(){return i.embed.includes(this.type)}},{key:"currentTime",set:function(e){var t=0;if(n.is.number(e)&&(t=e),t<0?t=0:t>this.duration&&(t=this.duration),this.isEmbed){var i=this.media.paused;switch(this.type){case"youtube":this.embed.seekTo(t);break;case"vimeo":this.embed.setCurrentTime(t)}i&&this.pause(),this.media.seeking=!0,n.dispatchEvent.call(this,this.media,"seeking")}else this.media.currentTime=t.toFixed(4);this.log("Seeking to "+this.currentTime+" seconds")},get:function(){return Number(this.media.currentTime)}},{key:"duration",get:function(){var e=parseInt(this.config.duration,10),t=Number(this.media.duration);return Number.isNaN(e)?t:e}},{key:"volume",set:function(e){var t=e,i=!n.is.undefined(t);if(n.is.string(t)&&(t=parseFloat(t)),n.is.number(t)||(t=this.storage.volume),n.is.number(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.media.volume=t,this.isEmbed){switch(this.type){case"youtube":this.embed.setVolume(100*this.media.volume);break;case"vimeo":this.embed.setVolume(this.media.volume)}n.dispatchEvent.call(this,this.media,"volumechange")}return 0===t?this.toggleMute(!0):this.media.muted&&i&&this.toggleMute(),this},get:function(){return this.media.volume}},{key:"speed",set:function(e){var t=n.is.number(e)?e:parseFloat(this.storage.speed||this.speed.selected||this.config.speed.default);if(t<.1&&(t=.1),t>2&&(t=2),this.config.speed.options.includes(t))switch(this.type){case"youtube":this.embed.setPlaybackRate(t);break;case"vimeo":t=null,this.warn("Vimeo playback rate change is not supported");break;default:this.media.playbackRate=t}else this.warn("Unsupported speed ("+t+")")},get:function(){switch(this.type){case"youtube":return this.embed.getPlaybackRate();case"vimeo":return this.warn("Vimeo playback rate change is not supported"),null;default:return this.media.playbackRate}}},{key:"quality",set:function(e){var t=n.is.string(e)?e:parseFloat(this.storage.quality||this.config.quality.selected);if(this.config.quality.options.includes(t))switch(this.type){case"youtube":this.utils.dispatchEvent.call(this,this.media,"qualityrequested",!1,{quality:t}),this.embed.setPlaybackQuality(t);break;default:this.warn("Quality options are only available for YouTube")}else this.warn("Unsupported quality option ("+t+")")},get:function(){switch(this.type){case"youtube":return this.embed.getPlaybackQuality();default:return this.warn("Quality options are only available for YouTube"),null}}},{key:"src",set:function(e){g.change.call(this,e)},get:function(){var e=void 0;switch(this.type){case"youtube":e=this.embed.getVideoUrl();break;case"vimeo":this.embed.getVideoUrl.then(function(t){e=t});break;default:e=this.media.currentSrc}return e}},{key:"poster",set:function(e){"video"===this.type?n.is.string(e)&&this.media.setAttribute("poster",e):this.warn("Poster can only be set on HTML5 video")},get:function(){return"video"!==this.type?null:this.media.getAttribute("poster")}},{key:"language",set:function(e){var t=this;if(n.is.empty(e))return this.toggleCaptions(!1),t;var i=e.toLowerCase();return this.captions.language===i?t:(this.toggleCaptions(!0),this.captions.language=i,n.dispatchEvent.call(this,this.media,"captionchange"),l.setCaption.call(this),l.setup.call(this),this)},get:function(){return this.captions.language}}]),e}()});

//# sourceMappingURL=plyr.js.map
