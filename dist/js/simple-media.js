!function(e){"use strict";function t(){var e,t,n,r=navigator.userAgent,s=navigator.appName,o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10);return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(s="IE",o="11;"):-1!==(t=r.indexOf("MSIE"))?(s="IE",o=r.substring(t+5)):-1!==(t=r.indexOf("Chrome"))?(s="Chrome",o=r.substring(t+7)):-1!==(t=r.indexOf("Safari"))?(s="Safari",o=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(o=r.substring(t+8))):-1!==(t=r.indexOf("Firefox"))?(s="Firefox",o=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(s=r.substring(e,t),o=r.substring(t+1),s.toLowerCase()==s.toUpperCase()&&(s=navigator.appName)),-1!==(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!==(n=o.indexOf(" "))&&(o=o.substring(0,n)),a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),[s,a]}function n(e){var t=[];return t=e.split(" --> "),s(t[0])}function r(e){var t=[];return t=e.split(" --> "),s(t[1])}function s(e){if(null===e||void 0===e)return 0;var t,n=[],r=[];return n=e.split(","),r=n[0].split(":"),t=Math.floor(60*r[0]*60)+Math.floor(60*r[1])+Math.floor(r[2])}function o(e){for(e.subcount=0;r(e.captions[e.subcount][0])<e.media.currentTime.toFixed(1);)if(e.subcount++,e.subcount>e.captions.length-1){e.subcount=e.captions.length-1;break}}function a(e){e.container.className+=" "+C.classes.captions.enabled,C.captions.defaultActive&&(e.container.className+=" "+C.classes.captions.active,e.buttons.captions.setAttribute("checked","checked"))}function i(e,t,n){return e.replace(new RegExp(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),n)}function c(e,t){e.length||(e=[e]);for(var n=e.length-1;n>=0;n--){var r=n>0?t.cloneNode(!0):t,s=e[n],o=s.parentNode,a=s.nextSibling;r.appendChild(s),a?o.insertBefore(r,a):o.appendChild(r)}}function l(e){var t=M.isFullScreen()?{x:0,y:0}:u(e.currentTarget);return{x:e.clientX-t.x,y:e.clientY-t.y}}function u(e){for(var t=0,n=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}}function d(e,t){for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},d(e[n],t[n])):e[n]=t[n];return e}function p(e){var t,n=I[e]||[],r=n.length;for(t=0;r>t;t++)n[t].apply(A.media,[])}function f(){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",element:null,prefix:""},t="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.cancelFullScreen)e.supportsFullScreen=!0;else for(var n=0,r=t.length;r>n;n++)if(e.prefix=t[n],"undefined"!=typeof document[e.prefix+"CancelFullScreen"]){e.supportsFullScreen=!0;break}return"webkit"===e.prefix&&navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)&&(e.supportsFullScreen=!1),e.supportsFullScreen&&(e.fullScreenEventName=e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},e.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]("webkit"===this.prefix?e.ALLOW_KEYBOARD_INPUT:null)},e.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()},e.element=function(){return""===this.prefix?document.fullscreenElement:document[this.prefix+"FullscreenElement"]}),e}function m(){C.debug&&console.log("Injecting custom controls");var e=C.html;e=i(e,"{aria-label}",C.playAriaLabel),e=i(e,"{id}",A.random),A.container.insertAdjacentHTML("beforeend",e)}function b(e){return A.container.querySelectorAll(e)}function v(e){return b(e)[0]}function g(){A.controls=v(C.selectors.controls),A.buttons={},A.buttons.play=v(C.selectors.buttons.play),A.buttons.pause=v(C.selectors.buttons.pause),A.buttons.restart=v(C.selectors.buttons.restart),A.buttons.rewind=v(C.selectors.buttons.rewind),A.buttons.forward=v(C.selectors.buttons.forward),A.buttons.mute=v(C.selectors.buttons.mute),A.buttons.captions=v(C.selectors.buttons.captions),A.buttons.fullscreen=v(C.selectors.buttons.fullscreen),A.progress={},A.progress.bar=v(C.selectors.progress),A.progress.text=A.progress.bar.getElementsByTagName("span")[0],A.volume=v(C.selectors.buttons.volume),A.duration=v(C.selectors.duration),A.seekTime=b(C.selectors.seekTime)}function x(){A.media.play(),A.container.className=A.container.className.replace(C.classes.stopped,C.classes.playing)}function T(){A.media.pause(),A.container.className=A.container.className.replace(C.classes.playing,C.classes.stopped)}function h(){A.media.currentTime=0,A.isTextTracks||(A.subcount=0),x()}function y(){A.volume.value=C.volume,A.media.volume=parseFloat(C.volume/10),k()}function k(){0===A.media.volume||A.media.muted?A.container.className+=" "+C.classes.muted:A.container.className=A.container.className.replace(C.classes.muted,"")}function w(){if(A.media=A.container.querySelectorAll("audio, video")[0],!A.media)return console.error("No audio or video element found!"),!1;if(null===A.media.getAttribute("autoplay")&&(A.container.className+=" "+C.classes.stopped),A.media.removeAttribute("controls"),A.type="video"==A.media.tagName.toLowerCase()?"video":"audio","video"===A.type){var e=document.createElement("div");e.setAttribute("class",C.classes.videoContainer),c(A.media,e),A.videoContainer=e}}function S(){if("video"===A.type){A.videoContainer.insertAdjacentHTML("afterbegin","<div class='"+C.selectors.captions.replace(".","")+"'></div>"),A.captionsContainer=v(C.selectors.captions),A.isTextTracks=!1,A.media.textTracks&&(A.isTextTracks=!0);for(var e,t="",s=A.media.childNodes,o=0;o<s.length;o++)"track"===s[o].nodeName.toLowerCase()&&(e=s[o].getAttribute("kind"),"captions"===e&&(t=s[o].getAttribute("src")));if(A.captionExists=!0,""===t?(A.captionExists=!1,C.debug&&console.log("No caption track found.")):C.debug&&console.log("Caption track found; URI: "+t),A.captionExists){var i,c,l={};if("IE"===A.browserName&&10===A.browserMajorVersion||"IE"===A.browserName&&11===A.browserMajorVersion||"Firefox"===A.browserName&&A.browserMajorVersion>=31||"Safari"===A.browserName&&A.browserMajorVersion>=7)for(C.debug&&console.log("Detected IE 10/11 or Firefox 31+ or Safari 7+"),A.isTextTracks=!1,l={},i=A.media.textTracks,c=0;c<i.length;c++)l=A.media.textTracks[c],l.mode="hidden";if(A.isTextTracks)for(C.debug&&console.log("textTracks supported"),a(A),l={},i=A.media.textTracks,c=0;c<i.length;c++)l=A.media.textTracks[c],l.mode="hidden","captions"===l.kind&&l.addEventListener("cuechange",function(){this.activeCues[0]&&this.activeCues[0].hasOwnProperty("text")&&(A.captionsContainer.innerHTML=this.activeCues[0].text)},!1);else if(C.debug&&console.log("textTracks not supported so rendering captions manually"),a(A),A.currentCaption="",A.subcount=0,A.captions=[],A.media.addEventListener("timeupdate",function(){A.media.currentTime.toFixed(1)>n(A.captions[A.subcount][0])&&A.media.currentTime.toFixed(1)<r(A.captions[A.subcount][0])&&(A.currentCaption=A.captions[A.subcount][1]),A.media.currentTime.toFixed(1)>r(A.captions[A.subcount][0])&&A.subcount<A.captions.length-1&&A.subcount++,A.captionsContainer.innerHTML=A.currentCaption},!1),""!==t){var u;window.XMLHttpRequest?u=new XMLHttpRequest:window.ActiveXObject&&(u=new ActiveXObject("Microsoft.XMLHTTP")),u.onreadystatechange=function(){if(4===u.readyState)if(200===u.status){C.debug&&console.log("xhr = 200"),A.captions=[];var e,t=[],n=u.responseText;t=n.split("\n\n");for(var r=0;r<t.length;r++)e=t[r],A.captions[r]=[],A.captions[r]=e.split("\n");A.captions.shift(),C.debug&&console.log("Successfully loaded the caption file via ajax.")}else C.debug&&console.log("There was a problem loading the caption file via ajax.")},u.open("get",t,!0),u.send()}"Safari"===A.browserName&&7===A.browserMajorVersion&&(C.debug&&console.log("Safari 7 detected; removing track from DOM"),i=A.media.getElementsByTagName("track"),A.media.removeChild(i[0]))}else A.container.className=A.container.className.replace(C.classes.captions.enabled,"")}}function N(){A.seekTime[0].innerHTML=C.seekInterval,A.seekTime[1].innerHTML=C.seekInterval}function F(){"video"===A.type&&C.fullscreen.enabled&&(C.debug&&console.log(M.supportsFullScreen?"Fullscreen supported":"No fullscreen supported"),M.supportsFullScreen?(C.debug&&console.log("Fullscreen enabled"),A.container.className+=" "+C.classes.fullscreen.enabled):C.debug&&console.warn("Fullscreen not supported"))}function L(){A.buttons.fullscreen.addEventListener("click",function(){M.isFullScreen()?M.cancelFullScreen():M.requestFullScreen(A.container)},!1),"video"===A.type&&C.clickToPause&&A.videoContainer.addEventListener("click",function(){A.media.paused?x():A.media.ended?h():T()},!1),A.buttons.play.addEventListener("click",function(){x(),A.buttons.pause.focus()},!1),A.buttons.pause.addEventListener("click",function(){T(),A.buttons.play.focus()},!1),A.buttons.restart.addEventListener("click",h,!1),A.buttons.rewind.addEventListener("click",function(){var e=A.media.currentTime-C.seekInterval;A.media.currentTime=0>e?0:e,A.isTextTracks||"video"!==A.type||o(A)},!1),A.buttons.forward.addEventListener("click",function(){var e=A.media.currentTime+C.seekInterval;A.media.currentTime=e>A.media.duration?A.media.duration:e,A.isTextTracks||"video"!==A.type||o(A)},!1),A.volume.addEventListener("change",function(){C.volume=this.value,y()},!1),A.buttons.mute.addEventListener("click",function(){A.media.muted=A.media.muted===!0?!1:!0,k()},!1),A.media.addEventListener("timeupdate",function(){A.secs=parseInt(A.media.currentTime%60),A.mins=parseInt(A.media.currentTime/60%60),A.secs=("0"+A.secs).slice(-2),A.mins=("0"+A.mins).slice(-2),A.duration.innerHTML=A.mins+":"+A.secs},!1),A.media.addEventListener("timeupdate",function(){A.percent=100/A.media.duration*A.media.currentTime,A.percent>0&&(A.progress.bar.value=A.percent,A.progress.text.innerHTML=A.percent)},!1),A.progress.bar.addEventListener("click",function(e){A.pos=l(e).x/this.offsetWidth,A.media.currentTime=A.pos*A.media.duration,A.isTextTracks||"video"!==A.type||o(A)}),A.buttons.captions.addEventListener("click",function(){this.checked?A.container.className+=" "+C.classes.captions.active:A.container.className=A.container.className.replace(C.classes.captions.active,"")},!1),A.media.addEventListener("ended",function(){"video"===A.type&&(A.captionsContainer.innerHTML=""),A.container.className=A.container.className.replace(C.classes.playing,C.classes.stopped)})}function E(e){A.container=e,w(),A.random=Math.floor(1e4*Math.random()),m(),g(),y(),F(),S(),N(),L()}var M,C,I={},A={},O={debug:!1,seekInterval:10,volume:5,clickToPause:!0,selectors:{container:".player",controls:".player-controls",buttons:{play:"[data-player='play']",pause:"[data-player='pause']",restart:"[data-player='restart']",rewind:"[data-player='restart']",forward:"[data-player='fast-forward']",mute:"[data-player='mute']",volume:"[data-player='volume']",captions:"[data-player='captions']",fullscreen:"[data-player='fullscreen']"},progress:".player-progress",captions:".player-captions",duration:".player-duration",seekTime:".player-seek-time"},classes:{videoContainer:"player-video",stopped:"stopped",playing:"playing",muted:"muted",captions:{active:"captions-active",enabled:"captions-enabled"},fullscreen:{enabled:"fullscreen-enabled"}},captions:{defaultActive:!0},fullscreen:{enabled:!0}};e.on=function(e,t){I[e]||(I[e]=[]),I[e].push(t)},e.setup=function(e){if(C=d(O,e),M=f(),A.browserInfo=t(),A.browserName=A.browserInfo[0],A.browserMajorVersion=A.browserInfo[1],C.debug&&console.log(A.browserName+" "+A.browserMajorVersion),"IE"===A.browserName&&(8===A.browserMajorVersion||9===A.browserMajorVersion))return C.debug&&console.error("Browser not suppported."),!1;if(A.isSmartphoneOrTablet=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),A.isSmartphoneOrTablet)return C.debug&&console.error("Browser not suppported."),!1;C.playAriaLabel="undefined"!=typeof C.title&&C.title.length?"Play "+C.title:"Play";var n=document.querySelector(C.selectors.container);return null===n?(C.debug&&console.error("Selector "+C.selectors.container+" not found!"),!1):(E(n),p("setup"),void 0)}}(this.simpleMedia=this.simpleMedia||{});